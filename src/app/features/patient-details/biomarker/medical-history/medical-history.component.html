<div [formGroup]="formGroup">
  <div class="mb-2 flex flex-row items-end">
    <p class="block font-medium leading-tight">
      {{ biomarker.displayName }}
    </p>
    <ce-tooltip [infoText]="biomarker.infoText" [tooltipId]="'biomarker-tooltip-' + biomarker.id"></ce-tooltip>
  </div>

  <div *ngIf="biomarker.type === 'options' || biomarker.type === 'boolean'" class="grid place-items-baseline">
    <ul class="flex gap-1">
      <li *ngFor="let option of biomarker.unit.options">
        <ng-container *ngIf="!option.isDisabled; else disabled">
          <input
            type="radio"
            [id]="biomarker.id + '_' + option.displayName"
            class="peer hidden"
            [value]="option.value?.toString()?.toLowerCase()"
            formControlName="value" />
        </ng-container>
        <label
          [for]="biomarker.id + '_' + option.displayName"
          class="block cursor-pointer select-none rounded-md border border-tone-2 bg-tone-1 p-2 text-text peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
          >{{ option.displayName }}</label
        ><!-- TODO: Properly handle translation -->
        <!-- Disable effected Marker marker -->
        <ng-template #disabled>
          <input
            type="radio"
            [id]="biomarker.id + '_' + option.displayName"
            class="peer hidden"
            [value]="option.value?.toString()?.toLowerCase()"
            disabled />
        </ng-template>
      </li>
    </ul>
  </div>

  <div *ngIf="biomarker.type === 'integer'" class="relative mt-2 rounded-md shadow-sm">
    <input
      type="number"
      [min]="biomarker.unit.minimum!"
      [max]="biomarker.unit.maximum!"
      formControlName="value"
      class="block w-full rounded-md border p-2 placeholder:text-label-2"
      [placeholder]="0"
      [ngClass]="isFieldInvalid('value') ? 'invalid' : 'valid'" />
    <div class="absolute inset-y-0 right-0 flex items-center">
      <div
        class="flex h-full items-center justify-center rounded-md py-1 pl-2 pr-2 text-label-2 focus:ring-2 focus:ring-inset focus:ring-indigo-600">
        <p class="text-center">{{ biomarker.unit.shorthand }}</p>
      </div>
    </div>
  </div>
  <p *ngIf="isFieldInvalid('value')" class="mt-2 text-sm text-red-600 dark:text-red-500">
    <span class="font-medium">
      {{ 'biomarker.validationRangeMessage' | translate: { min: biomarker.unit.minimum, max: biomarker.unit.maximum } }}
    </span>
  </p>
</div>
